"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[11968],{150585:(e,t,a)=>{function o(e,t){let a,o,n=!1;return function c(){if(n)return a=arguments,void(o=this);e.apply(this,arguments),n=!0,setTimeout((function(){n=!1,a&&(c.apply(o,a),a=o=null)}),t)}}a.d(t,{throttle:()=>o})},592423:(e,t,a)=>{a.d(t,{CaptchaType:()=>i,createCaptchaPopupService:()=>l});var o=a(32489),n=a(293721),c=a(418562),r=a(311606),s=a(621745),i=function(e){return e[e.IMAGE=0]="IMAGE",e[e.AUDIO=1]="AUDIO",e}({});const l=()=>{const e=(0,n.createGate)(),t=(0,o.createEvent)(),a=(0,o.createEvent)(),i=(0,o.createEvent)(),l=(0,o.createEvent)(),d=(0,o.createEvent)(),p=(0,o.createEvent)(),u=(0,o.createEvent)(),h=(0,o.createEvent)(),v=(0,o.createEvent)(),_=(0,o.createEvent)(),g=(0,o.createEvent)();(0,o.forward)({from:e.close,to:g});const f=(0,o.createStore)("");f.on(e.open,((e,{captchaImage:t})=>t));const m=(0,o.createStore)("");m.on(e.open,((e,{captchaTrack:t})=>t));const C=(0,o.createStore)("");C.on(e.open,((e,{deviceId:t})=>t));const b=(0,o.createStore)(null);b.on(e.open,(()=>"CAPTCHA_MODAL_ACTIVE")),b.on(_,(()=>null));const S=(0,o.createStore)(null);S.on(e.open,((e,t)=>t.platform));const w=(0,o.createStore)("");w.reset(e.close),w.on(e.open,((e,{sid:t})=>t));const y=(0,o.createStore)("");y.reset(e.close),y.on([u,h],(()=>(0,c.default)()));const k=(0,o.createStore)(0);k.on(p,(e=>e+1)),k.reset(e.close);const I=(0,o.createStore)("");I.reset(e.close),I.on(t,((e,t)=>t));const E=(0,o.createStore)(!0);E.reset([e.close,p,u]),E.on(l,(()=>!0)),E.on(u,(()=>!0)),E.on(d,(()=>!1)),E.on(v,(()=>!1));const R=(0,o.createStore)(0);R.on(p,(e=>0===e?1:0));const P=(0,o.createStore)(!1);P.reset(e.close),P.on(a,(()=>!0)),P.on(i,(()=>!1));const x=(0,o.createStore)(!1);x.reset([e.close,p,u,h]),x.on(v,(()=>!0));const L=(0,o.createStore)("");L.reset([e.close,u]);const M=(0,o.createStore)(0);M.reset([e.close,g]),M.on([u,p],(()=>5));const{tick:$,isRunning:V}=(0,r.interval)({timeout:1e3,start:(0,o.merge)([u,p]),stop:g});M.on($,(e=>e-1));const T=(0,o.createStore)(!1);T.reset(e.close);const A=(0,o.createStore)(!1);A.reset(e.close);const j=(0,o.createStore)(!0);j.reset(e.close),j.on(t,((e,t)=>""===t.trim()));const B=(0,o.createStore)(!0);return B.reset(e.close),B.on(p,(()=>!1)),(0,o.sample)({source:M,filter:e=>0===e,target:g}),(0,o.sample)({source:{isAudioPlaying:P,refreshCountdownRunning:V},fn:({isAudioPlaying:e,refreshCountdownRunning:t})=>e||t,target:[T,A]}),(0,o.sample)({clock:[e.open,h,p],source:{sid:w,hash:y,type:R,swapCount:k,platform:S,captchaImage:f,captchaTrack:m,deviceId:C,isFirst:B},fn:e=>(0,s.getCaptchaLink)(e),target:L}),(0,o.sample)({clock:u,source:{sid:w,hash:y,type:R,swapCount:k,platform:S,captchaImage:f,captchaTrack:m,deviceId:C},fn:e=>(0,s.getCaptchaLink)({...e,isRefresh:!0}),target:L}),{Gate:e,answerChanged:t,audioPlaying:a,audioPaused:i,captchaLoadingStarts:l,captchaLoadingEnds:d,captchaTypeToggled:p,captchaRefreshed:u,captchaReloaded:h,captchaLoadingErrorSet:v,closeCaptcha:_,$answer:I,$captchaLoading:E,$captchaType:R,$isAudioPlaying:P,$hasLoadCaptchaError:x,$captchaSrc:L,$refreshCountdown:M,$isRefreshButtonDisabled:T,$isCaptchaTypeToggleDisabled:A,$isSubmitButtonDisabled:j,$isCaptchaModalActive:b}}},972980:(e,t,a)=>{a.d(t,{CaptchaType:()=>o.CaptchaType,Platform:()=>n.Platform,createCaptchaPopupService:()=>o.createCaptchaPopupService});var o=a(592423),n=a(621745)},621745:(e,t,a)=>{a.d(t,{Platform:()=>c,getCaptchaLink:()=>r});var o=a(592423),n=a(586138),c=function(e){return e[e.VK_WEB=0]="VK_WEB",e[e.VK_M_WEB=1]="VK_M_WEB",e}({});const r=({sid:e,hash:t,type:a,isRefresh:c,swapCount:r,platform:s,isFirst:i,captchaImage:l,captchaTrack:d,deviceId:p})=>{const u=t?`&v=${t}`:"",h=c?"&refresh=1":"",v=!c&&r>0?"&swap_type=1":"",_=i?"&first=1":"";let g;switch(s){case 0:default:g=n.VK_WEB_APP_ID;break;case 1:g=n.VK_MVK_APP_ID}switch(a){case o.CaptchaType.IMAGE:{let t="";if(l){const e=new URLSearchParams(l);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${l}&s=1&width=400&resized=1`:`${l.replace("device_id=",`device_id=${p}`)}&s=1&width=400&resized=1`:`${l}&resized=1&width=400&app_id=${g}&device_id=${p}`}else t=`/captcha.php?sid=${e}&s=1&resized=1&width=400&app_id=${g}&device_id=${p}`;return`${t}${u}${h}${v}${_}`}case o.CaptchaType.AUDIO:{let t="";if(d){const e=new URLSearchParams(d);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${d}`:`${d.replace("device_id=",`device_id=${p}`)}`:`${d}&app_id=${g}&device_id=${p}`}else t=`/sound_captcha.php?act=get&captcha_sid=${e}&app_id=${g}&device_id=${p}`;return`${t}${u}${h}${v}${_}`}default:return""}}},226253:(e,t,a)=>{a.d(t,{customMetricsCollector:()=>n});var o=a(314309);const n=new class{logEvent(e){return this.actionStatCollector.logEvent({type:"type_ab_custom_metrics_item",type_ab_custom_metrics_item:e})}constructor(){this.productionStatCollector=new o.ProductionStatCollector,this.actionStatCollector=new o.ActionStatCollector(this.productionStatCollector)}}},591865:(e,t,a)=>{a.d(t,{messagingActionItemStatCollector:()=>n});var o=a(314309);const n=new class{logEvent(e){const t={type:"type_messaging_action_item",type_messaging_action_item:{label:this.getLabel(),...e}};this.actionStatCollector.logEvent(t)}getLabel(){const e=this.getUrlParams(),{isCommnityMail:t,isChatMail:a,isPeerMail:o}=this.getLabelFlags(e);let n="user";return n=t?a?"community_chat":o?"community_peer":"community":a?"user_chat":o?"user_peer":"user",n}getUrlParams(){const e=window.location.pathname.includes("/attachments")||window.location.pathname.includes("/gifts");return new URLSearchParams(e?window.nav.prev_cur:window.location.search)}getLabelFlags(e){const t=!!e.get("community"),a=e.get("peer");let o=!!e.get("chat"),n=!!a;return a&&+a>2e9&&(o=!0,n=!1),{isCommnityMail:t,isChatMail:o,isPeerMail:n}}constructor(){this.productStatCollector=new o.ProductionStatCollector,this.actionStatCollector=new o.ActionStatCollector(this.productStatCollector)}}},224873:(e,t,a)=>{a.d(t,{audioMessageStatCollector:()=>n});var o=a(314309);const n=new class{logEvent(e){const t={type:"type_messaging_audio_message_item",type_messaging_audio_message_item:e};this.actionStatCollector.logEvent(t)}constructor(){this.productStatCollector=new o.ProductionStatCollector,this.actionStatCollector=new o.ActionStatCollector(this.productStatCollector)}}},33545:(e,t,a)=>{a.d(t,{settingsChangesStatCollector:()=>n});var o=a(314309);const n=new class{logEvent(e){const t={type:"type_settings_changes_item",type_settings_changes_item:e};this.actionStatCollector.logEvent(t)}constructor(){this.productStatCollector=new o.ProductionStatCollector,this.actionStatCollector=new o.ActionStatCollector(this.productStatCollector)}}},303279:(e,t,a)=>{a.d(t,{handleCaptcha:()=>i});var o=a(657472),n=a(540462),c=a(265668),r=a(270959),s=a(345601);const i=e=>new Promise((async(t,a)=>{const i=e.redirect_uri;if(i)try{const a=await(0,c.showCaptchaSDK)(i);return void t({captcha_key:"",captcha_sid:e.captcha_sid,is_sound_captcha:0,success_token:a})}catch(e){if(e===o.CaptchaSDKEvents.CLOSE||e===o.CaptchaSDKEvents.OPENED)return void a()}if((0,n.partConfigEnabled)("vkcom_audio_captcha_enabled"))(0,s.showCaptchaPopup)({sid:e.captcha_sid,isRefreshEnabled:e.is_refresh_enabled,isSoundCaptchaAvailable:e.is_sound_captcha_available,captcha_track:e.captcha_track,captcha_img:e.captcha_img,onSubmit:(a,o)=>{t({captcha_sid:e.captcha_sid,captcha_key:a,is_sound_captcha:o})},onClose:()=>{a()}});else{let o=null;const c=(0,n.partConfigEnabled)("vkcom_captcha_resized")?`${e.captcha_img}&resized=1&width=400`:e.captcha_img,s=e?.is_refresh_enabled||!1,i={imgSrc:c,onSubmit:(e,a)=>{t({captcha_sid:e,captcha_key:a,is_sound_captcha:0}),o&&o.hide()},onHide:()=>{a()}};o=(0,r.showCaptchaBox)(e.captcha_sid,!1,null,i,s)}}))},345601:(e,t,a)=>{a.d(t,{showCaptchaPopup:()=>o.showCaptchaPopup});var o=a(630988)},236087:(e,t,a)=>{a.d(t,{CaptchaType:()=>o.CaptchaType,Platform:()=>o.Platform,captchaPopupService:()=>n});var o=a(972980);const n=(0,o.createCaptchaPopupService)()},630988:(e,t,a)=>{a.d(t,{showCaptchaPopup:()=>r});var o=a(474848),n=a(211413),c=a(98341);function r(e){(0,n.showMessageBoxModal)((t=>(0,o.jsx)(c.CaptchaPopup,{...t,...e,onClose:()=>{e.onClose&&e.onClose(),t.onClose()},onSubmit:(a,o)=>{e.onSubmit&&(e.onSubmit(a,o),t.onClose())}})),{width:300,onDestroy:()=>{e.onClose&&e.onClose()}})}},681735:(e,t,a)=>{a.d(t,{CaptchaAnswerField:()=>d});var o=a(474848),n=a(296540),c=a(44544),r=a(220208),s=a(236087),i=a(866467),l=a(293721);const d=(0,n.forwardRef)((({disabled:e,captchaType:t},a)=>{const d=(0,n.useRef)(null),p=(0,n.useRef)(null),u=(0,l.useStore)(s.captchaPopupService.$answer),h=(0,l.useEvent)(s.captchaPopupService.answerChanged);return(0,n.useImperativeHandle)(a,(()=>({inputFieldRef:d,inputLabelRef:p}))),(0,o.jsx)(c.FormItem,{mode:"vertical",noPadding:!0,top:t===s.CaptchaType.AUDIO?(0,o.jsx)("div",{tabIndex:0,ref:p,children:(0,i.getLang)("vkconnect_auth_audio_captcha_title")}):"",children:(0,o.jsx)(r.Input,{getRef:d,tabIndex:0,value:u,placeholder:t===s.CaptchaType.IMAGE?(0,i.getLang)("vkconnect_auth_label_captcha"):(0,i.getLang)("vkconnect_auth_label_captcha_audio_new_ux"),disabled:e,onChange:e=>h(e.target.value)})})}))},766969:(e,t,a)=>{a.d(t,{CaptchaAnswerField:()=>o.CaptchaAnswerField});var o=a(681735)},200831:(e,t,a)=>{a.d(t,{CaptchaError:()=>l});var o=a(474848),n=a(866467),c=a(293721),r=a(236087),s=a(220208),i=a(279734);const l=(0,a(296540).forwardRef)((({captchaType:e},t)=>{const a=(0,c.useEvent)(r.captchaPopupService.captchaReloaded);return(0,o.jsxs)(s.Footer,{children:[(0,o.jsx)(o.Fragment,{children:e===r.CaptchaType.IMAGE?(0,n.getLang)("vkconnect_auth_captcha_loading_error_caption"):(0,n.getLang)("vkconnect_auth_audio_captcha_loading_error_caption")}),(0,o.jsx)(i.Link,{onClick:a,getRootRef:t,role:"button","aria-label":e===r.CaptchaType.IMAGE?(0,n.getLang)("vkconnect_auth_captcha_image_loading_error_retry_aria_label"):(0,n.getLang)("vkconnect_auth_captcha_sound_loading_error_retry_aria_label"),children:(0,n.getLang)("vkconnect_auth_captcha_loading_error_refresh_text")})]})}))},165317:(e,t,a)=>{a.d(t,{CaptchaError:()=>o.CaptchaError});var o=a(200831)},932829:(e,t,a)=>{a.d(t,{CaptchaInfoButton:()=>l});var o=a(474848),n=a(296540),c=a(580539),r=a(454154),s=a(723723),i=a(866467);const l=(0,n.forwardRef)((({onClick:e},t)=>(0,o.jsx)(r.Button,{getRootRef:t,tabIndex:0,appearance:"neutral",mode:"tertiary",size:"m",before:(0,o.jsx)(c.Icon24InfoCircleOutline,{className:(0,s.getColorClass)("color_icon_secondary")}),"aria-label":(0,i.getLang)("vkconnect_auth_audio_captcha_info_text"),onClick:e})))},438105:(e,t,a)=>{a.d(t,{CaptchaInfoButton:()=>o.CaptchaInfoButton});var o=a(932829)},132015:(e,t,a)=>{a.d(t,{CaptchaPopup:()=>E});var o=a(474848),n=a(296540),c=a(293721),r=a(694244),s=a(220208),i=a(63614),l=a(303800),d=a(293116),p=a(700272),u=a(194528),h=a(175400),v=a(454154),_=a(866467),g=a(540462),f=a(836410),m=a(165317),C=a(740557),b=a(318029),S=a(766969),w=a(246407),y=a(438105),k=a(24343),I=a(236087);const E=({sid:e,isRefreshEnabled:t,isSoundCaptchaAvailable:a,captcha_track:E,captcha_img:R,onSubmit:P,onClose:x})=>{(0,c.useGate)(I.captchaPopupService.Gate,{sid:e,platform:I.Platform.VK_WEB,captchaTrack:E,captchaImage:R,deviceId:(0,w.getDeviceId)(I.Platform.VK_WEB)});const L=(0,g.partConfigEnabled)("vkcom_captcha_new_ux"),M=(0,c.useEvent)(I.captchaPopupService.captchaLoadingEnds),$=(0,c.useStore)(I.captchaPopupService.$hasLoadCaptchaError),V=(0,c.useStore)(I.captchaPopupService.$captchaLoading),T=(0,c.useEvent)(I.captchaPopupService.captchaLoadingErrorSet),A=(0,c.useStore)(I.captchaPopupService.$captchaType),j=(0,c.useStore)(I.captchaPopupService.$answer),B=(0,c.useStore)(I.captchaPopupService.$captchaSrc),D=(0,c.useStore)(I.captchaPopupService.$isSubmitButtonDisabled),z=(0,c.useStore)(I.captchaPopupService.$isCaptchaTypeToggleDisabled),F=(0,c.useEvent)(I.captchaPopupService.captchaTypeToggled),O=(0,c.useStore)(I.captchaPopupService.$isRefreshButtonDisabled),N=(0,c.useEvent)(I.captchaPopupService.captchaRefreshed),W=(0,c.useStore)(I.captchaPopupService.$refreshCountdown),G=(0,n.useRef)(null),K=(0,n.useRef)(null),U=(0,n.useRef)(null),H=(0,n.useRef)(null),q=(0,n.useRef)(null),X=(0,n.useRef)(null),Z=(0,n.useRef)(null),J=(0,n.useRef)(null),Q=A===I.CaptchaType.AUDIO,[Y,ee]=(0,n.useState)(!1),te=(0,c.useStore)(I.captchaPopupService.$isAudioPlaying),ae=e=>{e.preventDefault(),P&&P(j,Number(Q))},oe=(0,n.useCallback)((e=>{const t=J.current||Z.current||K.current,o=U.current,n=H.current,c=q.current,r=G?.current?.inputFieldRef.current,s=G?.current?.inputLabelRef.current,i=X.current,{activeElement:l}=document,d=[t,o,n,c,r,s,i].includes(l)?l:t;if("Space"===e.code&&[o,n,c,i,t].some((e=>d===e))){e.preventDefault();d.click()}function p(){Q&&!n?.disabled?n?.focus():u()}function u(){c?.disabled?h():c?.focus()}function h(){Q&&s?s?.focus():v()}function v(){r?.disabled?_():r?.focus()}function _(){L||!i?.disabled?i?.focus():g()}function g(){t?.focus()}if(a&&"Tab"===e.key&&!e.shiftKey&&d)switch(e.preventDefault(),d){case t:L||!o?.disabled?o?.focus():p();break;case o:p();break;case n:u();break;case c:h();break;case s:v();break;case r:_();break;case i:g()}function f(){r?.disabled?m():r?.focus()}function m(){Q?s?.focus():C()}function C(){c?.disabled?b():c?.focus()}function b(){Q?n?.focus():S()}function S(){L||!o?.disabled?o?.focus():w()}function w(){t?.focus()}if(a&&"Tab"===e.key&&e.shiftKey&&d)switch(e.preventDefault(),d){case t:L||!i?.disabled?i?.focus():f();break;case i:f();break;case r:m();break;case s:C();break;case c:b();break;case n:S();break;case o:w()}}),[a,L,Q]);(0,n.useEffect)((()=>(document.removeEventListener("keydown",oe),document.addEventListener("keydown",oe),()=>{document.removeEventListener("keydown",oe)})),[oe]),(0,n.useEffect)((()=>{if(Q){const e=e=>{e.ctrlKey&&!te&&J?.current?.click()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[Q,te]),(0,n.useEffect)((()=>{const e=K.current;!V&&A===I.CaptchaType.IMAGE&&e&&(e.tabIndex=0,e.ariaLabel=(0,_.getLang)("vkconnect_auth_captcha_image_aria_label"),e.focus()),V||A!==I.CaptchaType.AUDIO||J.current?.focus()}),[V,A]),(0,n.useEffect)((()=>{const e=Z.current;$&&e&&e.focus()}),[$]);return(0,o.jsxs)(r.ModalBox,{children:[(0,o.jsx)(s.ModalDismissButton,{onClick:x}),(0,o.jsx)(i.ModalBody,{insetLevel:1,children:(0,o.jsxs)(l.Div,{mode:"vertical",spacing:4,paddingTop:8,paddingBottom:8,children:[(0,o.jsxs)(d.Image,{getRef:K,alt:(0,_.getLang)("vkconnect_auth_captcha_image_aria_label"),src:A===I.CaptchaType.IMAGE?B:"",onLoad:M,onError:T,widthSize:268,heightSize:102,children:[V&&(0,o.jsx)(p.Spinner,{}),!V&&$&&(0,o.jsx)(m.CaptchaError,{ref:Z,captchaType:A}),!$&&Q&&(0,o.jsx)(f.SoundCaptcha,{ref:J,src:B,disabled:!L&&te})]}),(0,o.jsx)(u.Spacing,{size:6}),(0,o.jsxs)(h.ButtonGroup,{mode:"horizontal",stretched:!0,gap:"s",style:{justifyContent:"space-between"},children:[t&&(0,o.jsx)(C.CaptchaRefreshButton,{ref:U,newCaptchaUX:L,disabled:!L&&(O||Q&&(V||$)),countdownValue:W,captchaType:A,onRefresh:()=>{N(),L&&G?.current?.inputFieldRef.current?.focus()}}),(Q||a)&&(0,o.jsxs)(h.ButtonGroup,{mode:"horizontal",gap:"s",children:[Q&&(0,o.jsx)(y.CaptchaInfoButton,{ref:H,onClick:()=>{ee((e=>!e))}}),a&&(0,o.jsx)(b.CaptchaTypeButton,{ref:q,disabled:!L&&z,captchaType:A,onToggle:()=>{F(),L&&G?.current?.inputFieldRef.current?.focus()}})]})]}),Q&&Y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Spacing,{size:8}),(0,o.jsx)(k.InfoBanner,{})]}),(0,o.jsx)(u.Spacing,{size:16}),(0,o.jsxs)("form",{onSubmit:ae,children:[(0,o.jsx)(S.CaptchaAnswerField,{ref:G,disabled:Q&&(V||$),captchaType:A}),(0,o.jsx)(u.Spacing,{size:12}),(0,o.jsx)(h.ButtonGroup,{mode:"vertical",align:"center",stretched:!0,children:(0,o.jsx)(v.Button,{getRootRef:X,size:"l",stretched:!0,disabled:!L&&(D||Q&&(V||$)),onClick:ae,tabIndex:0,children:(0,_.getLang)("vkconnect_auth_captcha_submit_button")})})]})]})})]})}},98341:(e,t,a)=>{a.d(t,{CaptchaPopup:()=>o.CaptchaPopup});var o=a(132015)},740557:(e,t,a)=>{a.d(t,{CaptchaRefreshButton:()=>d});var o=a(474848),n=a(296540),c=a(573638),r=a(454154),s=a(723723),i=a(236087),l=a(866467);const d=(0,n.forwardRef)((({newCaptchaUX:e,disabled:t,countdownValue:a,captchaType:n,onRefresh:d},p)=>(0,o.jsx)(r.Button,{getRootRef:p,disabled:t,size:"m",appearance:"neutral",mode:"tertiary",before:(0,o.jsx)(c.Icon24Refresh,{className:(0,s.getColorClass)("color_icon_secondary")}),"aria-label":n===i.CaptchaType.IMAGE?(0,l.getLang)("vkconnect_auth_captcha_refresh_button_aria_label"):(0,l.getLang)("vkconnect_auth_captcha_refresh_audio_button_aria_label_new_ux"),tabIndex:0,onClick:d,children:e||!a?(0,l.getLang)("vkconnect_refresh_captcha"):(0,l.langReplace)((0,l.getLang)("vkconnect_refresh_captcha_via"),{time:String(a)})})))},298161:(e,t,a)=>{a.d(t,{CaptchaTypeButton:()=>p});var o=a(474848),n=a(296540),c=a(236087),r=a(963328),s=a(16547),i=a(454154),l=a(723723),d=a(866467);const p=(0,n.forwardRef)((({disabled:e,captchaType:t,onToggle:a},n)=>(0,o.jsx)(i.Button,{getRootRef:n,disabled:e,size:"m",appearance:"neutral",mode:"tertiary",before:t===c.CaptchaType.IMAGE?(0,o.jsx)(r.Icon24Headphones,{className:(0,l.getColorClass)("color_icon_secondary")}):(0,o.jsx)(s.Icon24TextOutline,{className:(0,l.getColorClass)("color_icon_secondary")}),onClick:a,"aria-label":t===c.CaptchaType.IMAGE?(0,d.getLang)("vkconnect_auth_captcha_enable_audio_aria_label"):(0,d.getLang)("vkconnect_auth_captcha_enable_image_aria_label"),tabIndex:0})))},318029:(e,t,a)=>{a.d(t,{CaptchaTypeButton:()=>o.CaptchaTypeButton});var o=a(298161)},772243:(e,t,a)=>{a.d(t,{InfoBanner:()=>s});var o=a(474848),n=a(327626),c=a(866467),r=a(428937);const s=()=>(0,o.jsx)(n.Banner,{noPadding:!0,size:"s",subheader:(0,c.getLang)("vkconnect_auth_audio_captcha_info_text"),mode:"image",imageTheme:"light",background:(0,o.jsx)("div",{className:r.default.background})})},24343:(e,t,a)=>{a.d(t,{InfoBanner:()=>o.InfoBanner});var o=a(772243)},104413:(e,t,a)=>{a.d(t,{SoundCaptcha:()=>h});var o=a(474848),n=a(296540),c=a(426622),r=a(155581),s=a(723723),i=a(271036),l=a(866467),d=a(205726),p=a(293721),u=a(236087);const h=(0,n.forwardRef)((({src:e,disabled:t},a)=>{const h=(0,n.useRef)(null),v=(0,p.useEvent)(u.captchaPopupService.audioPlaying),_=(0,p.useEvent)(u.captchaPopupService.audioPaused),g=(0,p.useEvent)(u.captchaPopupService.captchaLoadingErrorSet),f=(0,p.useEvent)(u.captchaPopupService.captchaLoadingStarts),m=(0,p.useEvent)(u.captchaPopupService.captchaLoadingEnds),C=(0,p.useStore)(u.captchaPopupService.$isAudioPlaying),b=(0,p.useStore)(u.captchaPopupService.$captchaLoading);return(0,n.useEffect)((()=>{const t=h.current;e&&t&&t.load()}),[e]),(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsx)("audio",{ref:h,preload:"none",src:e,onLoadStart:f,onCanPlay:m,onPlay:v,onPause:_,onError:g}),!b&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.IconIllustrationSoundWaveLeft36h,{className:(0,s.getColorClass)(C?"color_icon_accent_themed":"color_icon_tertiary")}),(0,o.jsx)(i.IconButton,{getRootRef:a,size:52,disabled:t,"aria-label":(0,l.getLang)("vkconnect_auth_captcha_play_audio_button_aria_label_new_ux"),className:(0,s.getColorClass)("color_text_accent_themed"),tabIndex:0,onClick:()=>{const e=h.current;e?.readyState||e?.load(),e?.play().catch((()=>{g()}))},children:(0,o.jsx)(d.Icon40PlayCircle,{})}),(0,o.jsx)(r.IconIllustrationSoundWaveRight36h,{className:(0,s.getColorClass)(C?"color_icon_accent_themed":"color_icon_tertiary")})]})]})}))},836410:(e,t,a)=>{a.d(t,{SoundCaptcha:()=>o.SoundCaptcha});var o=a(104413)},246407:(e,t,a)=>{a.d(t,{getDeviceId:()=>s});var o=a(553608),n=a(418562),c=a(236087);const r="vk_web_captcha_device_id",s=e=>{let t;switch(e){case c.Platform.VK_WEB:t=r;break;case c.Platform.VK_M_WEB:t="vk_m_web_captcha_device_id";break;default:t=r}let a=o.vkLocalStorage.getItem(t);return a||(a=(0,n.default)(),o.vkLocalStorage.setItem(t,a)),a}},65759:(e,t,a)=>{a.d(t,{ReportReasonIds:()=>p,afterCommentReportSubmit:()=>u,showReportForm:()=>i.showReportForm});var o=a(237625),n=a(866467),c=a(168066),r=a(864448),s=a(303279),i=a(415033),l=a(416368);(0,c.initApi)();const d=window.vk;(0,r.setLoginConfig)({onCaptcha:s.handleCaptcha,domain:d?.apiConfigDomains?.loginDomain}),(0,r.setApiConfig)({onCaptcha:s.handleCaptcha,domain:d?.apiConfigDomains?.apiDomain,challenge:l.processFetchChallenge});var p=function(e){return e[e.NotOriginalContent=28]="NotOriginalContent",e}({});function u(e,t,a){const c=function(e,t,a){switch(e){case"photo":return`#post${t}photo_${a}`;case"video":return`#post${t}video_${a}mv`;case"market":return`#post${t}market_${a}`}}(e,t,a);if("photo"===e){const e=document.querySelector(`${c} .dld`);null!==e&&(e.outerHTML="")}const r=document.querySelector(`${c} .reply_wrap`);null!==r?(r.style.display="none",r.outerHTML+=`<div class="dld">${(0,n.getLang)("global_report_sent")}</div>`):(0,o.debugLog)(`Unable to hide report button for ${e} comment`)}},415033:(e,t,a)=>{a.d(t,{showReportForm:()=>l});var o=a(474848),n=a(725669),c=a(211413),r=a(540462),s=a(319756),i=a(792242);function l(e,t,l,d,p,u,h,v,_){if((0,r.partConfigEnabled)("reports_miniapp")){const r=(0,n.asyncComponent)((()=>Promise.all([a.e(91498),a.e(89631),a.e(57861),a.e(58459),a.e("langs/web/MiniApp")]).then(a.bind(a,288355))),(({MiniApp:e})=>e));(0,c.showMessageBoxModalSuspense)((a=>(0,o.jsx)(r,{onSubmit:d,query:{from:h,adData:v,trackCode:_,type:e,sourceOwnerId:t,sourceId:l},...a})),{onDestroy:p})}else if("user"===e&&(0,r.partConfigEnabled)("content_reports_new_profile_form")){const e=(0,n.asyncComponent)((()=>Promise.all([a.e(91498),a.e(89631),a.e(66434),a.e("langs/web/ReportsProfileModal")]).then(a.bind(a,863927))),(({ReportsProfileModal:e})=>e)),r=e=>{window.location.assign(e)};(0,c.showMessageBoxModalSuspense)((a=>(0,o.jsx)(s.DIRootWebProvider,{children:(0,o.jsx)(e,{userId:t,onRedirect:r,onSilentModalShow:i.showSilentModeFormBox,...a})})),{onDestroy:p})}else{const r=(0,n.asyncComponent)((()=>Promise.all([a.e(91498),a.e(89631),a.e(99595),a.e("langs/web/ReportForm")]).then(a.bind(a,716729))),(({ReportForm:e})=>e));(0,c.showMessageBoxModalSuspense)((a=>(0,o.jsx)(r,{...a,trackCode:_||void 0,reportSource:e,reportSourceOwnerId:t,reportSourceId:l,onSubmit:d,messengerAdditionalData:u,from:h,adData:v})),{onDestroy:p})}}},517401:(e,t,a)=>{a.d(t,{ActionStatCollector:()=>o.ActionStatCollector,ClickStatCollector:()=>o.ClickStatCollector,EventScreens:()=>o.EventScreens,ProductionStatCollector:()=>o.ProductionStatCollector,RegistrationFieldItemNames:()=>o.RegistrationFieldItemNames,RegistrationItemEventTypes:()=>o.RegistrationItemEventTypes,RegistrationItemFlowSource:()=>o.RegistrationItemFlowSource,RegistrationItemStatCollector:()=>o.RegistrationItemStatCollector,VideoSubscriptionsClickEventTypes:()=>o.VideoSubscriptionsClickEventTypes,getScreen:()=>o.getScreen,marketingTransitionItemStat:()=>o.marketingTransitionItemStat,notificationSettingsEventItemStatCollector:()=>o.notificationSettingsEventItemStatCollector,searchStatsCollector:()=>o.searchStatsCollector,searchViewStatCollector:()=>o.searchViewStatCollector,setScreen:()=>o.setScreen,videoCreateClipStatsCollector:()=>o.videoCreateClipStatsCollector,videoPublishStatsCollector:()=>o.videoPublishStatsCollector,videoSubscriptionsClickStatsCollector:()=>o.videoSubscriptionsClickStatsCollector,videoSubscriptionsSelectCreatorsNavCollector:()=>o.videoSubscriptionsSelectCreatorsNavCollector});var o=a(314309);a(226253),a(591865),a(224873),a(33545)},183720:(e,t,a)=>{a.d(t,{mentionClick:()=>o.mentionClick,openArticleEditor:()=>o.openArticleEditor,shareAudioPlaylist:()=>o.shareAudioPlaylist,showPhoto:()=>o.showPhoto,showWiki:()=>o.showWiki});var o=a(458840)},450846:(e,t,a)=>{a.d(t,{showReportForm:()=>o.showReportForm});var o=a(65759)},812153:(e,t,a)=>{a.d(t,{useLottie:()=>r});var o=a(50790),n=a(296540),c=a(535130);function r(e,{play:t,show:a}={}){const{animationUrl:r,animationData:s}=e,i=(0,n.useRef)(!1),l=(0,n.useRef)(null),d=(0,n.useRef)(null),[p,u]=(0,n.useState)(!1),[h,v]=(0,n.useState)(null),[_,g]=(0,n.useState)(!1),[f,m]=(0,n.useState)(!1),C=(0,o.useIsMounted)();(0,n.useEffect)((()=>{const e=d.current;e&&!_&&(void 0!==t&&(t?e.play():e.pause()),void 0!==a&&(a?e.show():e.hide()))}),[_,t,a]),(0,n.useLayoutEffect)((()=>((async()=>{const t=d.current;t?i.current=!1:(g(!0),m(!1));const a=l.current;if((r||s)&&a&&!i.current){i.current=!0,u(!1),v(null);try{const t=await c.LottieManager.loadAnimation({containers:[a],...e});t.addEventListener("enterFrame",(()=>{requestAnimationFrame((()=>{m(!0)}))}),{once:!0}),t.addEventListener("destroy",(()=>{m(!1)}),{once:!0}),g(!1),d.current=t}catch(e){u(!0),v(e)}C()&&t?.destroy()}})(),()=>{d.current?.destroy()})),[r,s]);return{lottieError:p,lottieLoading:_,lottieLoaded:!_&&!p,lottieRendered:f,lottiePlayerRef:d,lottieContainerRef:l,lottieErrorMessage:h}}},426622:(e,t,a)=>{a.d(t,{IconIllustrationSoundWaveLeft36h:()=>o});var o=(0,a(844990).makeIcon)("IconIllustrationSoundWaveLeft36h","illustration_sound_wave_left_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_left_36h"><path d="M59.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M42.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0zM23.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M6.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0z" /></symbol>',72,36,!1,void 0)},155581:(e,t,a)=>{a.d(t,{IconIllustrationSoundWaveRight36h:()=>o});var o=(0,a(844990).makeIcon)("IconIllustrationSoundWaveRight36h","illustration_sound_wave_right_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_right_36h"><path d="M12.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zM4.96 10.446c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0zM48.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zm-15.942-1.25c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0z" /></symbol>',72,36,!1,void 0)},487376:(e,t,a)=>{a.d(t,{Icon12Place:()=>o});var o=(0,a(844990).makeIcon)("Icon12Place","place_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="place_12"><path fill="currentColor" fill-rule="evenodd" d="M10 5.053C10 2.855 8.212 1 6 1S2 2.855 2 5.053c0 1.54.983 3.335 2.899 5.456a1.48 1.48 0 0 0 2.11.094 2 2 0 0 0 .092-.094C9.018 8.389 10 6.592 10 5.052M6 3.5a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 6 3.5" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},405816:(e,t,a)=>{a.d(t,{Icon20ReportOutline:()=>o});var o=(0,a(844990).makeIcon)("Icon20ReportOutline","report_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="report_outline_20"><path d="M10.001 5.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75m-.9 8.4a.9.9 0 1 1 1.8 0 .9.9 0 0 1-1.8 0" /><path fill-rule="evenodd" d="m17.326 14.814-2.514 2.514c-.432.433-.648.649-.9.803a2.5 2.5 0 0 1-.723.3c-.288.069-.594.069-1.205.069h-3.97c-.612 0-.918 0-1.206-.07a2.5 2.5 0 0 1-.723-.299c-.252-.154-.468-.37-.9-.803L2.67 14.814c-.432-.432-.648-.648-.802-.9a2.5 2.5 0 0 1-.3-.723c-.068-.288-.068-.593-.069-1.204V8.014c0-.611 0-.917.069-1.205a2.5 2.5 0 0 1 .3-.723c.154-.252.37-.468.803-.9L5.186 2.67c.432-.432.649-.648.9-.803a2.5 2.5 0 0 1 .723-.299c.288-.069.594-.069 1.205-.069h3.97c.611 0 .917 0 1.205.07a2.5 2.5 0 0 1 .723.298c.252.155.468.371.9.804l2.514 2.514c.432.432.648.648.803.9.137.224.238.468.3.723.068.288.068.593.068 1.205v3.972c0 .611 0 .917-.069 1.205a2.5 2.5 0 0 1-.299.723c-.155.252-.37.468-.803.9Zm-.474-1.706c-.062.101-.149.188-.321.36l-3.063 3.063c-.173.173-.26.26-.36.322a1 1 0 0 1-.29.12c-.115.027-.237.027-.482.027H7.662c-.245 0-.367 0-.482-.028a1 1 0 0 1-.29-.12c-.1-.061-.186-.148-.36-.32l-3.06-3.065c-.173-.172-.26-.259-.321-.36a1 1 0 0 1-.12-.289C3 12.704 3 12.582 3 12.338V7.663c0-.245 0-.367.027-.482a1 1 0 0 1 .12-.29c.062-.1.148-.187.321-.36l3.064-3.063c.173-.172.26-.259.36-.32a1 1 0 0 1 .29-.12C7.295 3 7.418 3 7.662 3h4.673c.245 0 .367 0 .482.028a1 1 0 0 1 .29.12c.1.061.187.148.36.32l3.063 3.063c.172.173.259.26.32.36q.084.136.12.29c.028.115.028.237.028.482v4.674c0 .245 0 .367-.027.482a1 1 0 0 1-.12.29Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},963328:(e,t,a)=>{a.d(t,{Icon24Headphones:()=>o});var o=(0,a(844990).makeIcon)("Icon24Headphones","headphones_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="headphones_24"><path d="M12 2.25a9 9 0 0 0-9 9V18a3 3 0 0 0 3 3h1.5A1.5 1.5 0 0 0 9 19.5v-5A1.5 1.5 0 0 0 7.5 13H5v-1.75c0-3.87 3.13-7 7-7s7 3.13 7 7V13h-2.5a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5H18a3 3 0 0 0 3-3v-6.75a9 9 0 0 0-9-9" /></symbol>',24,24,!1,void 0)},573638:(e,t,a)=>{a.d(t,{Icon24Refresh:()=>o});var o=(0,a(844990).makeIcon)("Icon24Refresh","refresh_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="refresh_24"><path d="M12 9.096a.4.4 0 0 0 .67.296l4.287-3.899a.667.667 0 0 0 0-.987L12.67.609a.4.4 0 0 0-.67.295V4a8 8 0 1 0 8 8 1 1 0 1 0-2 0 6 6 0 1 1-6-6z" /></symbol>',24,24,!1,void 0)},205726:(e,t,a)=>{a.d(t,{Icon40PlayCircle:()=>o});var o=(0,a(844990).makeIcon)("Icon40PlayCircle","play_circle_40","0 0 40 40",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 40 40" id="play_circle_40"><path fill-rule="evenodd" d="M40 20c0 11.046-8.954 20-20 20S0 31.046 0 20 8.954 0 20 0s20 8.954 20 20m-14.329 1.077a1.25 1.25 0 0 0 0-2.154l-8.787-5.175A1.25 1.25 0 0 0 15 14.826v10.348a1.25 1.25 0 0 0 1.884 1.078z" clip-rule="evenodd" /></symbol>',40,40,!1,void 0)},428937:(e,t,a)=>{a.d(t,{default:()=>o});const o={background:"InfoBanner__background--4zHoK"}},140094:(e,t,a)=>{a.d(t,{InView:()=>h,observe:()=>d,useInView:()=>v});var o=a(296540);function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n.apply(this,arguments)}const c=new Map,r=new WeakMap;let s,i=0;function l(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(a=e.root,a?(r.has(a)||(i+=1,r.set(a,i.toString())),r.get(a)):"0"):e[t]}`;var a})).toString()}function d(e,t,a={},o=s){if(void 0===window.IntersectionObserver&&void 0!==o){const n=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:"number"==typeof a.threshold?a.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:n,observer:r,elements:i}=function(e){let t=l(e),a=c.get(t);if(!a){const o=new Map;let n;const r=new IntersectionObserver((t=>{t.forEach((t=>{var a;const c=t.isIntersecting&&n.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=c),null==(a=o.get(t.target))||a.forEach((e=>{e(c,t)}))}))}),e);n=r.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),a={id:t,observer:r,elements:o},c.set(t,a)}return a}(a);let d=i.get(e)||[];return i.has(e)||i.set(e,d),d.push(t),r.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(i.delete(e),r.unobserve(e)),0===i.size&&(r.disconnect(),c.delete(n))}}const p=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function u(e){return"function"!=typeof e.children}class h extends o.Component{constructor(e){super(e),this.node=null,this._unobserveCb=null,this.handleNode=e=>{this.node&&(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()},this.handleChange=(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),u(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)},this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:a,trackVisibility:o,delay:n,fallbackInView:c}=this.props;this._unobserveCb=d(this.node,this.handleChange,{threshold:e,root:t,rootMargin:a,trackVisibility:o,delay:n},c)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!u(this.props)){const{inView:e,entry:t}=this.state;return this.props.children({inView:e,entry:t,ref:this.handleNode})}const e=this.props,{children:t,as:a}=e,c=function(e,t){if(null==e)return{};var a,o,n={},c=Object.keys(e);for(o=0;o<c.length;o++)a=c[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,p);return o.createElement(a||"div",n({ref:this.handleNode},c),t)}}function v({threshold:e,delay:t,trackVisibility:a,rootMargin:n,root:c,triggerOnce:r,skip:s,initialInView:i,fallbackInView:l,onChange:p}={}){var u;const[h,v]=o.useState(null),_=o.useRef(),[g,f]=o.useState({inView:!!i,entry:void 0});_.current=p,o.useEffect((()=>{if(s||!h)return;let o;return o=d(h,((e,t)=>{f({inView:e,entry:t}),_.current&&_.current(e,t),t.isIntersecting&&r&&o&&(o(),o=void 0)}),{root:c,rootMargin:n,threshold:e,trackVisibility:a,delay:t},l),()=>{o&&o()}}),[Array.isArray(e)?e.toString():e,h,c,n,r,s,a,l,t]);const m=null==(u=g.entry)?void 0:u.target,C=o.useRef();h||!m||r||s||C.current===m||(C.current=m,f({inView:!!i,entry:void 0}));const b=[v,g.inView,g.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}}}]);try{stManager?.done("dist/web/chunks/c1d3c20c.364ab813.js")}catch(e){}