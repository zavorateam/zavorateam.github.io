(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[28141],{804552:(e,t,s)=>{"use strict";s.d(t,{API:()=>p});var r=s(365006),a=s(143626),i=s(976725),o=s(471065),n=s(808869),c=s(208409),u=s(549665);const d="undefined"!=typeof window&&window.vk?.apiConfigDomains?.apiDomain||"api.vk.com";class p extends a.CallbackService{setOptions(e){this.options={...this.options,...e}}execute(e){return this.call("execute",e)}procedure(e,t){return this.call(`execute.${e}`,t)}call(e,t){return this.callWithRequest(new a.APIRequest({method:e,params:t,api:this}))}callWithRequest(e){return this.worker.enqueue(e),e.promise}getWorker(){switch(this.options.mode){case u.APIMode.PARALLEL:return new i.ParallelWorker(this);case u.APIMode.SEQUENTIAL:return new o.SequentialWorker(this)}}constructor(e,t={}){super(),this.globalParams=new Map,this.options={token:"",mode:u.APIMode.SEQUENTIAL,requestMode:u.APIRequestMode.SEQUENTIAL,requestMethod:u.APIRequestMethod.FETCH,wait:3e3,limit:3,bridge:!1,version:r.API_VERSION,baseUrl:`https://${d}`,retryLimit:3,timeout:6e4,executeCount:25,language:"ru",executeUnsupportedMethods:["photos.save","photos.saveWallPhoto","photos.saveOwnerPhoto","photos.saveMessagesPhoto","messages.setChatPhoto","photos.saveMarketPhoto","photos.saveMarketAlbumPhoto","audio.save","docs.save","photos.saveOwnerCoverPhoto","stories.save","polls.savePhoto"],logError:()=>{},...e};for(const t of n.methodGroups)this[t]=new Proxy(Object.create(null),{get:(s,r)=>(s,i)=>{if("toJSON"!==r)return this.callWithRequest(new a.APIRequest({api:this,method:`${t}.${r}`,params:s,options:i}));e.logError&&e.logError(new Error("Internal API: Unsupported api method toJSON"))}});this.worker=this.getWorker(),this.updates=new c.Updates(this,t)}}},328233:(e,t,s)=>{"use strict";s.d(t,{CaptchaType:()=>i,MINIMUM_TIME_INTERVAL_API:()=>a,POLLING_VERSION:()=>r});const r=10,a=1133;var i;!function(e){e.API="API",e.DIRECT_AUTH="DIRECT_AUTH",e.IMPLICIT_FLOW_AUTH="IMPLICIT_FLOW_AUTH",e.ACCOUNT_VERIFICATION="ACCOUNT_VERIFICATION"}(i||(i={}))},602598:(e,t,s)=>{"use strict";s.d(t,{APIError:()=>i});var r=s(695368),a=s(615983);class i extends a.VKError{constructor(e){const t=Number(e.error_code);switch(super({code:t,message:`Code №${t} - ${e.error_msg}`}),this.params=e.request_params,t===r.API_ERROR_CAPTCHA&&(this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img),t){case r.API_ERROR_CAPTCHA:this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img;break;case r.API_ERROR_AUTH_VALIDATION:this.redirectUri=e.redirect_uri;break;case r.API_ERROR_NEED_CONFIRMATION:this.confirmationText=e.confirmation_text}}}},679885:(e,t,s)=>{"use strict";s.d(t,{ExecuteError:()=>a});var r=s(602598);class a extends r.APIError{constructor(e){super({error_code:e.error_code,error_msg:e.error_msg,request_params:[]}),this.method=e.method}}},149057:(e,t,s)=>{"use strict";s.d(t,{OAuthError:()=>a});var r=s(615983);class a extends r.VKError{constructor({error:e,error_description:t}){super({code:e,message:t})}}},245684:(e,t,s)=>{"use strict";s.d(t,{UpdatesError:()=>a});var r=s(615983);class a extends r.VKError{}},615983:(e,t,s)=>{"use strict";var r;s.d(t,{SharedErrorCode:()=>r,VKError:()=>a}),function(e){e.UNSUPPORTED_MODE="UNSUPPORTED_MODE",e.MISSING_CAPTCHA_HANDLER="MISSING_CAPTCHA_HANDLER",e.MISSING_TOKEN_REGENERATE_HANDLER="MISSING_TOKEN_REGENERATE_HANDLER"}(r||(r={}));class a extends Error{constructor({code:e,message:t}){super(t),this.code=e,this.name=this.constructor.name}}},928388:(e,t,s)=>{"use strict";s.d(t,{CallbackService:()=>a});var r=s(615983);class a{get hasCaptchaHandler(){return void 0!==this.captchaHandler}onCaptcha(e){return this.captchaHandler=e,this}processingCaptcha(e){const{captchaHandler:t}=this;return t?new Promise(((s,r)=>{t(e,(e=>new Promise(((t,a)=>{if(e instanceof Error)return a(e),void r(e);s({key:e,validate:{resolve:t,reject:a}})}))))})):Promise.reject(new r.VKError({code:r.SharedErrorCode.MISSING_CAPTCHA_HANDLER,message:"Missing captcha handler"}))}get hasTokenRegenerateHandler(){return void 0!==this.tokenRegenerateHandler}onTokenRegenerate(e){return this.tokenRegenerateHandler=e,this}processingTokenRegenerate(){const{tokenRegenerateHandler:e}=this;return void 0===e?Promise.reject(new r.VKError({code:r.SharedErrorCode.MISSING_TOKEN_REGENERATE_HANDLER,message:"Missing token regenerate handler"})):new Promise(((t,s)=>{e((e=>new Promise(((r,a)=>{if(e instanceof Error)return a(e),void s(e);t({token:e,validate:{resolve:r,reject:a}})}))))}))}}},317267:(e,t,s)=>{"use strict";s.d(t,{EventDispatcher:()=>r});class r{hasEventListener(e,t,s){return this.listeners.some((r=>!(!s||r.id!==s)||r.type===e&&r.listener===t))}addEventListener(e,t,s={},r){return this.hasEventListener(e,t,r)||this.listeners.push({type:e,listener:t,options:s,id:r}),this}removeEventListener(e,t,s){if(s)return this.listeners=this.listeners.filter((e=>e.id!==s)),this;const r=this.listeners.findIndex((s=>s.type===e&&s.listener===t));return-1!==r&&this.listeners.splice(r,1),this}removeEventListeners(){return this.listeners=[],this}dispatchEvent(e){return this.listeners.filter((t=>t.type===e.type)).forEach((t=>{const{type:s,listener:r,options:{once:a}}=t;r.call(this,e),a&&this.removeEventListener(s,r)})),this}constructor(){this.listeners=[]}}},143626:(e,t,s)=>{"use strict";s.d(t,{APIRequest:()=>r.APIRequest,CallbackService:()=>a.CallbackService});var r=s(176227),a=s(928388)},176227:(e,t,s)=>{"use strict";s.d(t,{APIRequest:()=>n});var r=s(783541),a=s.n(r),i=s(349758),o=s(35006);class n{toString(){return(0,o.getExecuteMethod)(this.method,this.params)}buildParams(e={}){const{options:{token:t,version:s,language:r}}=this.api;return Object.fromEntries([...Object.entries({...!this.isCustomMethod&&{v:s,access_token:t},lang:r,...e}),...this.api.globalParams.entries()].filter((([,e])=>void 0!==e)))}get filteredParams(){return this.buildParams(this.params)}get isCustomMethod(){const{requestMethod:e}=this.api.options;return"function"==typeof e}async make(){const{options:{timeout:e,requestMethod:t}}=this.api;this.timeout=setTimeout((()=>this.options.abortController?.abort()),e);try{return this.isCustomMethod?await this.custom():await this[t]()}finally{clearTimeout(this.timeout)}}fetch(){const{abortController:e,body:t}=this.options,{options:{baseUrl:s}}=this.api,r=new URL(`/method/${this.method}`,s);return void 0!==t&&(r.search=new URLSearchParams(this.buildParams()).toString()),fetch(r,{method:"POST",signal:e?.signal,headers:{connection:"keep-alive"},body:t??new URLSearchParams(this.filteredParams)}).then((e=>e.json()))}bridge(){const{abortController:e}=this.options;return new Promise(((t,s)=>{e?.signal.aborted&&s(e.signal.reason),e?.signal.addEventListener("abort",(()=>{s(e.signal.reason)})),a().send("VKWebAppCallAPIMethod",{method:this.method,params:this.filteredParams}).then(t).catch((e=>{const{error_data:s}=e;t({error:s?.error_reason||s||e})}))}))}script(){const{abortController:e}=this.options,{options:{baseUrl:t}}=this.api;return new Promise(((s,r)=>{e?.signal.aborted&&r(e.signal.reason);const a=(0,i.generateId)(20),o=new URLSearchParams(this.filteredParams);o.set("callback",a);const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=new URL(`/method/${this.method}?${o}`,t).toString(),window[a]=e=>{n.remove(),delete window[a],s(e)},e?.signal.addEventListener("abort",(()=>{n.remove(),delete window[a],r(e.signal.reason)})),document.head.appendChild(n)}))}custom(){const{abortController:e}=this.options,{requestMethod:t}=this.api.options;if("function"==typeof t)return new Promise(((s,r)=>{e?.signal.aborted&&r(e.signal.reason),e?.signal.addEventListener("abort",(()=>{r(e.signal.reason)})),t(this.method,this.filteredParams).then(s).catch(r)}))}constructor({api:e,method:t,params:s={},options:r={}}){var a;this.retries=0,this.api=e,this.method=t,this.params={...s},this.options={...r},(a=this.options).abortController??(a.abortController=new AbortController),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}},840661:(e,t,s)=>{"use strict";s(296540)},767396:(e,t,s)=>{"use strict";s.d(t,{API:()=>r.API,StaticUpdatesManager:()=>o.StaticUpdatesManager,StickersQueueEventType:()=>c.StickersQueueEventType,UpdatesSource:()=>i.UpdatesSource,VKError:()=>a.VKError,VmojiQueueEventType:()=>n.VmojiQueueEventType,getRandomId:()=>u.getRandomId});var r=s(804552),a=(s(549665),s(149057),s(245684),s(679885),s(615983)),i=(s(602598),s(208409)),o=s(987088),n=s(202062),c=s(136331),u=(s(593233),s(417327),s(749495),s(892711),s(677343),s(840661),s(656936));s(209676),s(737328)},808869:(e,t,s)=>{"use strict";s.d(t,{methodGroups:()=>r});const r=["account","accountPersonal","accountVerification","achievements","actionLinks","address","adex","admin","admins","ads","adsint","adsweb","antispam","appWidgets","apps","appsModeration","appsSDK","articles","assets","audio","audioAdmin","audioBooks","audioSearch","auth","authorsMarketplace","autotests","backoffice","badges","bandLink","bestFriends","bid","biz","blogforce","board","bot","botsConf","botscores","bugtracker","bugtrackerAdmin","businessGroups","calls","callsOk","captcha","captchaNotRobot","cashout","catalog","channels","classifieds","combo","coupons","crowd","crowdAdmin","crowdCustomer","crowdService","cua","database","devAdmin","docs","documentation","donut","downloadedGames","ecosystem","ecosystemManager","education","educationCloud","educationEjd","educationExercise","educationExternal","educationMembership","educationOrganization","educationParents","educationPolls","educationReport","educationSchool","educationUser","email","esia","eventHub","exchange","exchangeRates","execute","explore","externalAudioMatching","fave","feedbacks","finance","findMe","fortuneSquare","fortuneWheel","friends","gamesPromo","geo","gifts","goodsOrders","government","groups","healthApp","healthCommon","healthCourses","healthFeed","healthLoyalty","healthSteps","healthWorkouts","id","identity","internal","jobs","leadForms","likes","lovina","loyaltyTeen","market","marketIntegrations","marusia","masks","massClaim","meEducation","memories","messages","messagesEdu","microlandings","moderation","moderationMark","money","multiaccount","music","musicAdmin","musicManager","musicSubscriptions","narratives","newsfeed","nft","nftAdmin","nftMarket","nospam","notes","notifications","odnoklassniki","onboarding","orders","pages","phones","photos","places","platform","platformConsole","podcasts","podcastsOffice","polls","prettyCards","promoCodes","questions","queue","recomSettings","reports","restore","rewardedAds","rightholders","safety","search","secure","serverEffects","serviceBooking","services","settings","settingsGeneral","shortVideo","shortVideoAdmin","situationalSuggests","sms","social","spaces","specials","splashscreens","splashscreensAdmin","statEvents","stats","statsDashboard","status","stickers","storage","store","stories","streaming","strikeSystem","studentsVerification","studio","superApp","superAppPromo","support","supportInternal","tabbar","tags","textlives","tickets","tinkoff","translations","uma","unitedContentPlatform","userActionLog","userLinking","users","utils","uxpolls","verification","video","videoPostcards","vkCharity","vkIdB2BHub","vkIdHub","vkMaps","vkMusic","vkProtect","vkRun","vkStart","vkUp","vkidmail","vkstore","vmoji","voicerooms","wall","weather","widgets","widgetsIOS","widgetsKit","wishlists","zeus"]},549665:(e,t,s)=>{"use strict";var r,a,i;s.d(t,{APIMode:()=>r,APIRequestMethod:()=>i,APIRequestMode:()=>a}),function(e){e.PARALLEL="parallel",e.SEQUENTIAL="sequential"}(r||(r={})),function(e){e.SEQUENTIAL="sequential",e.BURST="burst"}(a||(a={})),function(e){e.FETCH="fetch",e.SCRIPT="script",e.BRIDGE="bridge"}(i||(i={}))},136331:(e,t,s)=>{"use strict";var r;s.d(t,{StickersQueueEvent:()=>a,StickersQueueEventType:()=>r}),function(e){e.UGC_USER_UPDATE="ugc_user_update",e.UGC_PACK_UPDATE="ugc_pack_update",e.UGC_OWNER_UPDATE="ugc_owner_update",e.UGC_STICKER_UPDATE="ugc_sticker_update",e.CACHE_UPDATE="cache_update"}(r||(r={}));class a extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},677343:(e,t,s)=>{"use strict";s.d(t,{StickersCacheUpdate:()=>a});var r=s(136331);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.CACHE_UPDATE,e)}}},615492:(e,t,s)=>{"use strict";s.d(t,{handlerStickersQueueEvent:()=>u});var r=s(136331),a=s(593233),i=s(417327),o=s(749495),n=s(892711),c=s(677343);function u(e,{data:t}){const{type:s}=t;switch(s){case r.StickersQueueEventType.UGC_PACK_UPDATE:e.dispatchEvent(new a.StickersUGCPackUpdate(t));break;case r.StickersQueueEventType.UGC_USER_UPDATE:e.dispatchEvent(new i.StickersUGCUserUpdate(t));break;case r.StickersQueueEventType.UGC_OWNER_UPDATE:e.dispatchEvent(new o.StickersUGCOwnerUpdate(t));break;case r.StickersQueueEventType.UGC_STICKER_UPDATE:e.dispatchEvent(new n.StickersUGCStickerUpdate(t));break;case r.StickersQueueEventType.CACHE_UPDATE:e.dispatchEvent(new c.StickersCacheUpdate(t))}}},749495:(e,t,s)=>{"use strict";s.d(t,{StickersUGCOwnerUpdate:()=>a});var r=s(136331);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_OWNER_UPDATE,e)}}},593233:(e,t,s)=>{"use strict";s.d(t,{StickersUGCPackUpdate:()=>a});var r=s(136331);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_USER_UPDATE,e)}}},892711:(e,t,s)=>{"use strict";s.d(t,{StickersUGCStickerUpdate:()=>a});var r=s(136331);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_STICKER_UPDATE,e)}}},417327:(e,t,s)=>{"use strict";s.d(t,{StickersUGCUserUpdate:()=>a});var r=s(136331);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_USER_UPDATE,e)}}},202062:(e,t,s)=>{"use strict";var r;s.d(t,{VmojiQueueEvent:()=>a,VmojiQueueEventType:()=>r}),function(e){e.AVATAR="avatar",e.STICKERS="stickers",e.CHARACTER="character",e.STICKERS_PRINT_REQUEST="stickers_print_request"}(r||(r={}));class a extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},755315:(e,t,s)=>{"use strict";s.d(t,{handleVmojiQueueEvent:()=>a});var r=s(202062);function a(e,{data:t}){const{type:s,query_id:a}=t;a&&e.dispatchEvent(new r.VmojiQueueEvent(a,t)),e.dispatchEvent(new r.VmojiQueueEvent(s,t))}},208409:(e,t,s)=>{"use strict";s.d(t,{Updates:()=>h,UpdatesSource:()=>r});var r,a,i,o=s(245684),n=s(317267),c=s(755315),u=s(615492),d=s(738193),p=s(328233);!function(e){e.USER="user",e.GROUP="group",e.VMOJI="vmoji",e.STICKERS="stickers"}(r||(r={})),function(e){e.CHECK="a_check",e.RELEASE="a_release"}(a||(a={})),function(e){e.NEED_RESTART="NEED_RESTART",e.POLLING_REQUEST_FAILED="POLLING_REQUEST_FAILED"}(i||(i={}));class h extends n.EventDispatcher{async start(){if(!this.started){this.started=!0;try{const e=await this.getLongPollServer();if(!e)return;const{server:t,key:s,ts:i}=e;switch(0===this.ts&&(this.ts=i),this.url=new URL(t),this.url.searchParams.set("key",s),this.url.searchParams.set("act",a.CHECK),this.url.searchParams.set("wait","25"),this.url.searchParams.set("mode",String(this.mode)),this.url.searchParams.set("version",String(p.POLLING_VERSION)),this.source){case r.VMOJI:case r.STICKERS:this.url.searchParams.set("id",String(this.userId))}this.startFetchLoop()}catch(e){throw this.started=!1,e}}}async getLongPollServer(){let e;switch(this.source){case r.GROUP:e=await this.api.groups.getLongPollServer({group_id:this.groupId});break;case r.VMOJI:case r.STICKERS:e=await this.api[this.source].subscribeToQueue().then((({base_url:e,...t})=>({server:e,...t})));break;default:return}const{server:t}=e;return e.server=`${t.startsWith("https")?"":"https://"}${t}`,e}async stop(){this.started=!1,this.restarted=0}async startFetchLoop(){try{for(;this.started;)await this.fetchUpdates()}catch(e){if(e.code!==i.NEED_RESTART&&this.restarted!==this.retryLimit)return this.restarted+=1,await(0,d.wait)(3e3),void this.startFetchLoop();for(;this.started;)try{await this.stop(),await this.start();break}catch(e){console.log(e),this.started=!0,await(0,d.wait)(this.wait)}}}async fetchUpdates(){this.url.searchParams.set("ts",String(this.ts));const e=new AbortController,t=setTimeout((()=>e.abort()),3e4);let s;try{const t=await fetch(this.url,{method:"GET",signal:e.signal,headers:{connection:"keep-alive"}});if(!t.ok)throw new o.UpdatesError({code:i.POLLING_REQUEST_FAILED,message:"Polling request failed"});s=await t.json()}finally{clearTimeout(t)}if(void 0!==s.failed){if(1===s.failed)return void(this.ts=s.ts);throw this.ts=0,new o.UpdatesError({code:i.NEED_RESTART,message:"The server has been failed"})}this.restarted=0,this.ts=s.ts,s.pts&&(this.pts=Number(s.pts)),s.updates=s.updates||s.events||[];for(const e of s.updates)this.handleUpdate(e)}handleUpdate(e){switch(this.source){case r.VMOJI:(0,c.handleVmojiQueueEvent)(this,e);break;case r.STICKERS:(0,u.handlerStickersQueueEvent)(this,e)}}constructor(e,t={}){super(),this.mode=202,this.started=!1,this.ts=0,this.pts=0,this.restarted=0,this.api=e;const{source:s,userId:r,groupId:a,wait:i,retryLimit:o}=t;this.source=s,this.userId=r,this.groupId=a,this.wait=i||3e3,this.retryLimit=o||3}}},987088:(e,t,s)=>{"use strict";s.d(t,{StaticUpdatesManager:()=>i});var r=s(208409);class a{createObjectWithQueueKeys(e,t){const s={};return e.forEach((e=>{s[e]=t(e)})),s}startListenToQueue(e){this.activeQueues.add(e),this.queues[e].start()}stopListenToQueue(e){this.activeQueues.delete(e),this.listenersCount[e]=0,this.queues[e].stop()}started(e){return this.activeQueues.has(e)}start(e){this.listenersCount[e]+=1,this.started(e)||this.startListenToQueue(e)}stop(e){this.listenersCount[e]<2?this.stopListenToQueue(e):this.listenersCount[e]-=1}constructor(e,t){this.api=e;const s=[r.UpdatesSource.STICKERS,r.UpdatesSource.VMOJI,r.UpdatesSource.GROUP,r.UpdatesSource.USER];this.queues=this.createObjectWithQueueKeys(s,(s=>new r.Updates(e,{...t,source:s}))),this.listenersCount=this.createObjectWithQueueKeys(s,(e=>0)),this.activeQueues=new Set}}class i{static setup(e,t){return i.updates||(i.updates=new a(e,t)),i.updates}}i.updates=void 0},349758:(e,t,s)=>{"use strict";function r(e){const t="abcdefghijklmnopqrstuvwxyz";let s="";for(let r=0;r<e;r++)s+=t.charAt(Math.floor(26*Math.random()));return s}s.d(t,{generateId:()=>r})},737328:(e,t,s)=>{"use strict";var r;s(783541);!function(e){e.WALL="wall",e.DOCS="docs",e.STATS="stats",e.VIDEO="video",e.PAGES="pages",e.NOTES="notes",e.MANAGE="manage",e.MARKET="market",e.PHOTOS="photos",e.STATUS="status",e.GROUPS="groups",e.OFFLINE="offline",e.STORIES="stories",e.FRIENDS="friends",e.MESSAGES="messages",e.APP_WIDGET="app_widget"}(r||(r={}))},93419:(e,t,s)=>{"use strict";function r(e){return`return [${e.join(",")}];`}s.d(t,{getChainReturn:()=>r})},35006:(e,t,s)=>{"use strict";s.d(t,{getExecuteMethod:()=>a});var r=s(9141);function a(e,t={}){return`API.${e}(${(0,r.getExecuteParams)(t)})`}},9141:(e,t,s)=>{"use strict";function r(e){return JSON.stringify(e,((t,s)=>"object"==typeof s&&s!==e?String(s):s))}s.d(t,{getExecuteParams:()=>r})},209676:(e,t,s)=>{"use strict";s(602598),s(149057),s(738193)},656936:(e,t,s)=>{"use strict";function r(){const e=Math.pow(2,32)/2-1;return Math.floor(Math.random()*e)}s.d(t,{getRandomId:()=>r})},764538:(e,t,s)=>{"use strict";function r(e,t){let s=0;t.response.forEach(((r,a)=>{const i=e[a];!1===r?(i.reject(t.errors[s]),s++):i.resolve(r)}))}s.d(t,{resolveExecuteTask:()=>r})},738193:(e,t,s)=>{"use strict";function r(e){return new Promise((t=>{setTimeout(t,e)}))}s.d(t,{wait:()=>r})},976725:(e,t,s)=>{"use strict";s.d(t,{ParallelWorker:()=>n});var r=s(143626),a=s(471065),i=s(93419),o=s(764538);class n extends a.SequentialWorker{async execute(){const{queue:e}=this;if(this.isAllowedMethod(e[0].method))return void super.execute();const{executeCount:t}=this.api.options,s=[];for(let r=0;r<this.queue.length&&(this.isAllowedMethod(e[r].method)||(s.push(e.splice(r,1)[0]),r-=1,!(s.length>=t)));r+=1);if(0===s.length)return;const a=new r.APIRequest({api:this.api,method:"execute",params:{code:(0,i.getChainReturn)(s.map(String))}});super.execute(a);try{(0,o.resolveExecuteTask)(s,await a.promise)}catch(e){for(const t of s)t.reject(e)}}isAllowedMethod(e){return e.startsWith("execute")||this.api.options.executeUnsupportedMethods.includes(e)}}},471065:(e,t,s)=>{"use strict";s.d(t,{SequentialWorker:()=>u});var r=s(695368),a=s(255500),i=s(602598),o=s(679885),n=s(738193),c=s(328233);class u extends a.APIWorker{async execute(e){if(e||(e=this.queue.shift()),!e)return;const{method:t}=e;let s;try{s=await e.make()}catch(t){const{options:s}=this.api;return e.retries===s.limit?(e.captchaValidate?.reject(t),void e.reject(t)):(e.retries+=1,await(0,n.wait)(s.wait),void this.requeue(e))}void 0===s.error?(e.captchaValidate?.resolve(),t.startsWith("execute")?e.resolve({response:s.response,errors:(s.execute_errors||[]).map((e=>new o.ExecuteError(e)))}):e.resolve(s.response??s)):this.handleError(e,new i.APIError(s.error))}async handleError(e,t){const{code:s}=t,{options:a}=this.api;if(e.retries!==a.limit){if(e.retries+=1,s===r.API_ERROR_TOO_MANY)return this.paused?void this.requeue(e):(this.pause(),await(0,n.wait)(c.MINIMUM_TIME_INTERVAL_API),this.requeue(e),void this.resume());if(e.captchaValidate?.reject(t),e.tokenRegenerateValidate?.reject(t),s===r.API_ERROR_CAPTCHA&&this.api.hasCaptchaHandler)try{const{captchaSid:s}=t,{key:r,validate:a}=await this.api.processingCaptcha({type:c.CaptchaType.API,src:t.captchaImg,sid:s,request:e});e.captchaValidate=a,e.params.captcha_sid=s,e.params.captcha_key=r,this.requeue(e)}catch(t){e.reject(t)}else if(s===r.API_ERROR_AUTH&&this.api.hasTokenRegenerateHandler)try{const{token:t,validate:s}=await this.api.processingTokenRegenerate();this.api.options.token=t,e.tokenRegenerateValidate=s,await(0,n.wait)(c.MINIMUM_TIME_INTERVAL_API),this.requeue(e)}catch(t){e.reject(t)}else e.reject(t)}else e.reject(t)}}},255500:(e,t,s)=>{"use strict";s.d(t,{APIWorker:()=>a});var r=s(328233);class a{enqueue(e){this.queue.push(e),this.immediateHeat()}requeue(e){this.queue.unshift(e),this.immediateHeat()}pause(){this.paused=!0}resume(){this.paused=!1,this.immediateHeat()}heat(){if(this.paused||this.busy||!this.queue.length)return;this.busy=!0;const{requestMode:e}=this.api.options;this[e]()}sequential(){this.execute(),setTimeout((()=>{this.busy=!1,this.immediateHeat()}),this.intervalPerRequests)}burst(){const e=Math.min(this.api.options.limit,this.queue.length);for(let t=0;t<e&&0!==this.queue.length;t+=1)this.execute();const t=Math.ceil(r.MINIMUM_TIME_INTERVAL_API-e*this.intervalPerRequests);setTimeout((()=>{this.busy=!1,this.immediateHeat()}),t<=0?r.MINIMUM_TIME_INTERVAL_API:t)}immediateHeat(){setTimeout((()=>this.heat()))}constructor(e){this.busy=!1,this.paused=!1,this.queue=[],this.api=e,this.intervalPerRequests=Math.ceil(r.MINIMUM_TIME_INTERVAL_API/this.api.options.limit)}}},783541:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};function s(e,t,s){if(s||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function r(e,s,r){var a=function(e){var t={current:0,next:function(){return++this.current}},s={};return{add:function(r,a){var i=null!=a?a:"".concat(t.next(),"_").concat(e);return s[i]=r,i},resolve:function(e,t,r){var a=s[e];a&&(r(t)?a.resolve(t):a.reject(t),s[e]=null)}}}(r);return s((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,s=t.request_id,r=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(t,["request_id"]);s&&a.resolve(s,r,(function(e){return!("error_type"in e)}))}})),function(s,r){return void 0===r&&(r={}),new Promise((function(i,o){var n=a.add({resolve:i,reject:o},r.request_id);e(s,t(t({},r),{request_id:n}))}))}}var a,i,o,n,c,u,d,p="undefined"!=typeof window,h=Boolean(p&&window.AndroidBridge),l=Boolean(p&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),m=Boolean(p&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),E=p&&!h&&!l,v=E&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),A=E?"message":"VKWebAppEvent",f=s(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate","VKWebAppRecommend","VKWebAppAddToProfile"],E&&!v?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppGetFriends","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"],!0),b=p?window.AndroidBridge:void 0,g=l?window.webkit.messageHandlers:void 0,S=E?parent:void 0;e.EAdsFormats=void 0,(a=e.EAdsFormats||(e.EAdsFormats={})).REWARD="reward",a.INTERSTITIAL="interstitial",e.BannerAdLayoutType=void 0,(i=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE="resize",i.OVERLAY="overlay",e.BannerAdLocation=void 0,(o=e.BannerAdLocation||(e.BannerAdLocation={})).TOP="top",o.BOTTOM="bottom",e.EGrantedPermission=void 0,(n=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA="camera",n.LOCATION="location",n.PHOTO="photo",e.EGetLaunchParamsResponseLanguages=void 0,(c=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU="ru",c.UK="uk",c.UA="ua",c.EN="en",c.BE="be",c.KZ="kz",c.PT="pt",c.ES="es",e.EGetLaunchParamsResponseGroupRole=void 0,(u=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN="admin",u.EDITOR="editor",u.MEMBER="member",u.MODER="moder",u.NONE="none",e.EGetLaunchParamsResponsePlatforms=void 0,(d=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB="desktop_web",d.DESKTOP_WEB_MESSENGER="desktop_web_messenger",d.DESKTOP_APP_MESSENGER="desktop_app_messenger",d.MOBILE_WEB="mobile_web",d.MOBILE_ANDROID="mobile_android",d.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",d.MOBILE_IPHONE="mobile_iphone",d.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",d.MOBILE_IPAD="mobile_ipad";var _=function(e){var t=void 0,a=[],i=Math.random().toString(36).substring(2,5);function o(e){a.push(e)}function n(){return l||h}function c(){return E&&window.parent!==window}function u(){return n()||c()}function d(e){if(l||h)return s([],a,!0).map((function(t){return t.call(null,e)}));var r=null==e?void 0:e.data;if(E&&r){if(m&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}var i=r.type,o=r.data,n=r.frameId;i&&("VKWebAppSettings"!==i?s([],a,!0).map((function(e){return e({detail:{type:i,data:o}})})):t=n)}}m&&/(android)/i.test(navigator.userAgent)?document.addEventListener(A,d):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(A,d);var p=r((function(s,r){b&&b[s]?b[s](JSON.stringify(r)):g&&g[s]&&"function"==typeof g[s].postMessage?g[s].postMessage(r):m?window.ReactNativeWebView.postMessage(JSON.stringify({handler:s,params:r})):S&&"function"==typeof S.postMessage&&S.postMessage({handler:s,params:r,type:"vk-connect",webFrameId:t,connectVersion:e},"*")}),o,i);return{send:p,sendPromise:p,subscribe:o,unsubscribe:function(e){var t=a.indexOf(e);t>-1&&a.splice(t,1)},supports:function(e){return h?!(!b||"function"!=typeof b[e]):l?!(!g||!g[e]||"function"!=typeof g[e].postMessage):!!E&&f.includes(e)},isWebView:n,isIframe:c,isEmbedded:u,isStandalone:function(){return!u()}}}("2.12.2");e.applyMiddleware=function e(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];return s.includes(void 0)||s.includes(null)?e.apply(void 0,s.filter((function(e){return"function"==typeof e}))):function(e){if(0===s.length)return e;var r,a={subscribe:e.subscribe,send:function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return e.send.apply(e,t)}},i=s.filter((function(e){return"function"==typeof e})).map((function(e){return e(a)})).reduce((function(e,t){return function(s){return e(t(s))}}));return r=i(e.send),t(t({},e),{send:r})}},e.default=_,e.parseURLSearchParamsForGetLaunchParams=function(t){var s={};try{new URLSearchParams(t).forEach((function(t,r){switch(r){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":s[r]=Number(t);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":s[r]=t;break;case"odr_enabled":s.odr_enabled="1"===t?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":s[r]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(t);break;case"vk_language":s.vk_language=function(t){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_viewer_group_role":s.vk_viewer_group_role=function(t){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_platform":s.vk_platform=function(t){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===t}))}(t)?t:void 0}}))}catch(e){console.warn(e)}return s},Object.defineProperty(e,"__esModule",{value:!0})}(t)},77783:(e,t,s)=>{"use strict";function r(e){return new Promise(((t,s)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>s(e.error)}))}function a(e,t){const s=indexedDB.open(e);s.onupgradeneeded=()=>s.result.createObjectStore(t);const a=r(s);return(e,s)=>a.then((r=>s(r.transaction(t,e).objectStore(t))))}let i;function o(){return i||(i=a("keyval-store","keyval")),i}function n(e,t=o()){return t("readonly",(t=>r(t.get(e))))}function c(e,t,s=o()){return s("readwrite",(s=>(s.put(t,e),r(s.transaction))))}function u(e,t,s=o()){return s("readwrite",(s=>new Promise(((a,i)=>{s.get(e).onsuccess=function(){try{s.put(t(this.result),e),a(r(s.transaction))}catch(e){i(e)}}}))))}function d(e,t=o()){return t("readwrite",(t=>(t.delete(e),r(t.transaction))))}function p(e=o()){return e("readwrite",(e=>(e.clear(),r(e.transaction))))}s.d(t,{clear:()=>p,createStore:()=>a,del:()=>d,get:()=>n,set:()=>c,update:()=>u})}}]);try{stManager?.done("dist/web/chunks/49cd2c47.a7269b5b.js")}catch(e){}