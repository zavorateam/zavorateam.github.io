<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Генератор CSS-анимаций</title>
  <link rel="icon" href="../assets/favicon.svg">
  <style>
    /* --------------------------------- */
    /* 1. СТИЛИ ТЕМЫ (СВЕТЛАЯ / ТЕМНАЯ) */
    /* --------------------------------- */
    :root {
      /* Светлая тема по умолчанию */
      --text: #1a1d21;
      --text-muted: #6b7280;
      --bg-page: #f0f0f0;
      --card-bg: #ffffff;
      --input-bg: #ffffff;
      --input-border: #ccc;
      --primary: #4CAF50;
      --primary-hover: #45a049;
      --shadow: 0 4px 12px rgba(0,0,0,0.08);
      --border-radius: 8px;
    }

    body.dark-mode {
      /* Темная тема */
      --text: #e0e0e0;
      --text-muted: #a0a0a0;
      --bg-page: #1e1e21;
      --card-bg: #2b2b2d;
      --input-bg: #3c3c3e;
      --input-border: #555;
      --primary: #5cb85c; /* Более яркий зеленый для контраста в темноте */
      --primary-hover: #4cae4c;
      --shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    
    /* ----------------------------- */
    /* 2. БАЗОВЫЕ СТИЛИ И ИНТЕРФЕЙС */
    /* ----------------------------- */

    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 20px;
      background: var(--bg-page);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }
    
    h2, h3 {
        color: var(--text);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    @media (max-width: 900px) {
        .container {
            grid-template-columns: 1fr;
        }
    }
    
    .tool-section {
      background: var(--card-bg);
      padding: 25px;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      transition: background 0.3s, box-shadow 0.3s;
    }
    
    /* Элемент предпросмотра */
    .preview-box {
      width: 100px;
      height: 100px;
      background: var(--primary); /* Используем переменную темы */
      margin: 20px auto;
      position: relative;
      border-radius: 6px;
    }
    
    /* Управление */
    .controls {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 20px 0;
    }
    
    .control-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      color: var(--text-muted);
      font-size: 0.95em;
    }
    
    select, input[type="number"], input[type="text"] {
      width: 100%;
      padding: 10px;
      background: var(--input-bg);
      color: var(--text);
      border: 1px solid var(--input-border);
      border-radius: 4px;
      box-sizing: border-box;
      transition: border-color 0.3s, background-color 0.3s;
    }
    
    select:focus, input:focus {
        border-color: var(--primary);
        outline: none;
    }
    
    /* Кнопки */
    button {
      padding: 10px 20px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 10px 0 0;
      transition: background 0.2s, transform 0.1s;
      font-weight: bold;
    }
    
    button:hover {
      background: var(--primary-hover);
      transform: translateY(-1px);
    }
    
    /* Вывод кода */
    .code-output {
      background: var(--input-bg);
      padding: 15px;
      border-radius: 4px;
      border: 1px solid var(--input-border);
      font-family: monospace;
      white-space: pre-wrap;
      margin-top: 20px;
      color: var(--text);
      overflow-x: auto;
    }
    
    /* Ключевые кадры */
    .keyframes {
      margin-top: 25px;
      padding-top: 15px;
      border-top: 1px dashed var(--input-border);
    }
    
    .keyframe {
      display: grid;
      grid-template-columns: 80px 1fr auto;
      gap: 10px;
      margin: 10px 0;
      padding: 10px;
      background: var(--bg-page); /* Немного отличается от фона карточки */
      border-radius: 4px;
      align-items: center;
      transition: background 0.3s;
    }

    .keyframe-percent {
        padding-right: 0;
    }
    
    .add-keyframe {
      text-align: center;
      margin: 10px 0;
    }
    
    .keyframe button {
        margin: 0;
        background: #dc3545;
        padding: 10px;
    }
    .keyframe button:hover {
        background: #c82333;
    }
  </style>
</head>
<body>
  <div class="header-nav">
    <a href="./index.html?file=anycraft.ztmf" class="back-btn">← Вернуться на главную</a>
    <h1>Форматирование химических формул</h1>
  </div>
  <div class="container">
    <div class="tool-section">
      <h2>Предпросмотр анимации</h2>
      <div class="preview-box" id="previewBox"></div>
      
      <div class="controls">
        <div class="control-group">
          <div>
            <label>Тип анимации</label>
            <select id="animationType">
              <option value="transform">Трансформация</option>
              <option value="opacity">Прозрачность</option>
              <option value="background">Цвет фона</option>
              <option value="scale">Масштаб</option>
              <option value="rotate">Вращение</option>
            </select>
          </div>
          <div>
            <label>Длительность (сек)</label>
            <input type="number" id="duration" value="1" min="0.1" step="0.1">
          </div>
        </div>
        
        <div class="control-group">
          <div>
            <label>Задержка (сек)</label>
            <input type="number" id="delay" value="0" min="0" step="0.1">
          </div>
          <div>
            <label>Повторение</label>
            <select id="iteration">
              <option value="1">1 раз</option>
              <option value="2">2 раза</option>
              <option value="3">3 раза</option>
              <option value="infinite">Бесконечно</option>
            </select>
          </div>
        </div>
        
        <div class="control-group">
          <div>
            <label>Направление</label>
            <select id="direction">
              <option value="normal">Нормальное</option>
              <option value="reverse">Обратное</option>
              <option value="alternate">Чередующееся</option>
              <option value="alternate-reverse">Чередующееся обратное</option>
            </select>
          </div>
          <div>
            <label>Функция времени</label>
            <select id="timing">
              <option value="linear">Линейная</option>
              <option value="ease">Плавная</option>
              <option value="ease-in">Ускорение</option>
              <option value="ease-out">Замедление</option>
              <option value="ease-in-out">Ускорение-замедление</option>
            </select>
          </div>
        </div>
      </div>
      
      <div class="keyframes">
        <h3>Ключевые кадры</h3>
        <div id="keyframesList">
          <div class="keyframe">
            <input type="number" value="0" min="0" max="100" class="keyframe-percent">%
            <input type="text" class="keyframe-value" placeholder="Значение">
            <button onclick="removeKeyframe(this)">Удалить</button>
          </div>
          <div class="keyframe">
            <input type="number" value="100" min="0" max="100" class="keyframe-percent">%
            <input type="text" class="keyframe-value" placeholder="Значение">
            <button onclick="removeKeyframe(this)">Удалить</button>
          </div>
        </div>
        <div class="add-keyframe">
          <button onclick="addKeyframe()">Добавить ключевой кадр</button>
        </div>
      </div>
      
      <button onclick="generateAnimation()">Сгенерировать анимацию</button>
    </div>

    <div class="tool-section">
      <h2>CSS код</h2>
      <div class="code-output" id="cssCode"></div>
    </div>
  </div>

  <script>
    const previewBox = document.getElementById('previewBox');
    const keyframesList = document.getElementById('keyframesList');
    const cssCode = document.getElementById('cssCode');

    function addKeyframe() {
      const keyframe = document.createElement('div');
      keyframe.className = 'keyframe';
      keyframe.innerHTML = `
        <input type="number" value="50" min="0" max="100" class="keyframe-percent">%
        <input type="text" class="keyframe-value" placeholder="Значение">
        <button onclick="removeKeyframe(this)">Удалить</button>
      `;
      keyframesList.appendChild(keyframe);
    }

    function removeKeyframe(button) {
      button.parentElement.remove();
    }

    function generateAnimation() {
      const animationType = document.getElementById('animationType').value;
      const duration = document.getElementById('duration').value;
      const delay = document.getElementById('delay').value;
      const iteration = document.getElementById('iteration').value;
      const direction = document.getElementById('direction').value;
      const timing = document.getElementById('timing').value;

      // Собираем ключевые кадры
      const keyframes = Array.from(keyframesList.children).map(frame => {
        const percent = frame.querySelector('.keyframe-percent').value;
        const value = frame.querySelector('.keyframe-value').value;
        return `${percent}% { ${getProperty(animationType, value)} }`;
      }).join('\n  ');

      // Генерируем CSS код
      const animationName = `animation-${Date.now()}`;
      const css = `@keyframes ${animationName} {
  ${keyframes}
}

.element {
  animation: ${animationName} ${duration}s ${timing} ${delay}s ${iteration} ${direction};
}`;

      cssCode.textContent = css;

      // Применяем анимацию к превью
      previewBox.style.animation = `${animationName} ${duration}s ${timing} ${delay}s ${iteration} ${direction}`;
    }

    function getProperty(type, value) {
      switch(type) {
        case 'transform':
          return `transform: ${value};`;
        case 'opacity':
          return `opacity: ${value};`;
        case 'background':
          return `background-color: ${value};`;
        case 'scale':
          return `transform: scale(${value});`;
        case 'rotate':
          return `transform: rotate(${value}deg);`;
        default:
          return '';
      }
    }

    // Инициализация значений по умолчанию
    document.querySelectorAll('.keyframe-value').forEach((input, index) => {
      if (index === 0) {
        input.value = 'translateX(0)';
      } else {
        input.value = 'translateX(100px)';
      }
    });

    // Генерируем начальную анимацию
    generateAnimation();
  </script>
  <script src="https://zavorateam.github.io/lumo-framework/lumo-theme.js" defer></script>
</body>
</html> 